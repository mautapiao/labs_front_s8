<!-- ============================================================
     Listado de registros (todos)
     ------------------------------------------------------------
     - Muestra los registros obtenidos desde el backend.
     - Incluye acciones: Crear, Editar, Eliminar, Ver.
     - Se aplican estilos Bootstrap para tabla y botones.
     - Compatible con Angular 17 + Vite.
     ============================================================ -->

<div class="container mt-4">

  <!-- TÃ­tulo -->
  <h2 class="mb-3 text-center">ğŸ§ª GestiÃ³n de Solicitud AnÃ¡lisis</h2>


  <!-- Indicadores de carga / error -->
  <div *ngIf="loading" class="alert alert-info text-center">
    Cargando registros...
  </div>

  <div *ngIf="error" class="alert alert-danger text-center">
    {{ error }}
  </div>

  <!-- BotÃ³n de nuevo -->
  <div class="d-flex justify-content-end mb-3">
    <a routerLink="/solicitudes/nuevo" class="btn btn-success">
      â• Nuevo
    </a>
  </div>

  <!-- Tabla -->
  <table *ngIf="!loading && !error && solicitud.length > 0"
    class="table table-striped table-bordered table-hover shadow-sm">
    <thead class="table-light">
      <tr>
        <th scope="col">#</th>
        <th scope="col">NÂº AtenciÃ³n</th>
        <th scope="col">Fecha</th>
        <th scope="col">Detalle</th>
        <th scope="col">Laboratorio</th>
        <th scope="col">Paciente</th>
        <th scope="col">Tipo</th>
        <th scope="col">Acciones</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let sol of solicitud; let i = index">
        <td class="align-middle text-center fw-semibold">{{ i + 1 }}</td>
        <td class="align-middle">
          {{ sol.numeroAtencion }}
        </td>
        <td class="align-middle" [ngStyle]="{'white-space': 'nowrap'}">
            {{ sol.fechaSolicitud }} 
        </td>


        <td class="align-middle">
          {{ sol.detalleExamen }}
        </td>
        <td class="align-middle">
          {{ sol.laboratorio.nombre}}
        </td>
        <td class="align-middle">
         {{ sol.paciente.paterno}} {{ sol.paciente.materno}} {{ sol.paciente.nombres}}
        </td>
         <td class="align-middle">
          {{ sol.tipoAnalisis.nombre}}
        </td>

        <td class="align-middle text-center">

          <a [routerLink]="['/solicitudes/editar', sol.id]" class="btn btn-sm btn-outline-secondary me-1">
            âœï¸ Editar
          </a>

          <button (click)="eliminar(sol.id)" class="btn btn-sm btn-outline-danger">
            ğŸ—‘ï¸ Eliminar
          </button>
        </td>


      </tr>
    </tbody>
  </table>

  <!-- Mensaje si no hay libros -->
  <div *ngIf="!loading && !error && solicitud.length === 0" class="alert alert-secondary text-center">
    No hay registros en la base de datos.
  </div>
</div>