<!-- ============================================================
     Listado de registros (todos)
     ------------------------------------------------------------
     - Muestra los registros obtenidos desde el backend.
     - Incluye acciones: Crear, Editar, Eliminar, Ver.
     - Se aplican estilos Bootstrap para tabla y botones.
     - Compatible con Angular 17 + Vite.
     ============================================================ -->

<div class="container mt-4">

  <!-- TÃ­tulo -->
  <h2 class="mb-3 text-center">ðŸ‘¥ GestiÃ³n de Usuarios</h2>

  <div class="alert bg-white border border-start border-warning d-flex align-items-center shadow-sm rounded-3">
    <i class="las la-exclamation-triangle fs-3 me-3 text-warning"></i>
    <div>
        <strong>Advertencia:</strong><br>
        Por motivos de seguridad y privacidad, el administrador no puede editar informaciÃ³n personal.
    </div>
</div>


  <!-- Indicadores de carga / error -->
  <div *ngIf="loading" class="alert alert-info text-center">
    Cargando registros...
  </div>

  <div *ngIf="error" class="alert alert-danger text-center">
    {{ error }}
  </div>

  <!-- Tabla -->
  <table *ngIf="!loading && !error && usuarios.length > 0" class="table table-striped table-bordered table-hover shadow-sm">
    <thead class="table-light">
      <tr>
        <th scope="col"># ID</th>
        <th scope="col">RUT</th>
        <th scope="col">Nombre Completo</th>
         <th scope="col">Email</th>
         <th scope="col">Rol</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let usr of usuarios; let i = index">
        <td class="align-middle text-center fw-semibold">{{ i + 1 }}</td>
        <td class="align-middle">
          {{ usr.rut }}-{{ usr.dv }}
        </td>
        <td class="align-middle">
          <a [routerLink]="['/usuarios/edit', usr.id]" class="text-decoration-none fw-semibold">
             {{ usr.paterno }} {{ usr.materno }} {{ usr.nombres }}
          </a>
        </td>
       
        <td class="align-middle">
          {{ usr.email }}
        </td>
        <td class="align-middle">
          {{ usr.rolModel.nombre}}
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Mensaje si no hay libros -->
  <div *ngIf="!loading && !error && usuarios.length === 0" class="alert alert-secondary text-center">
    No hay registros en la base de datos.
  </div>
</div>

